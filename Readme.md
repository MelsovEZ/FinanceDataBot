# FinanceDataBot

## Оглавление
- [Описание](#описание)
- [Функциональные возможности](#функциональные-возможности)
- [Технические требования](#технические-требования)
- [Установка и запуск](#установка-и-запуск)
  - [Предварительные требования](#предварительные-требования)
  - [Настройка окружения (Стандартный запуск)](#настройка-окружения-стандартный-запуск)
  - [Запуск бота (Стандартный запуск)](#запуск-бота-стандартный-запуск)
  - [Запуск с использованием Docker](#запуск-с-использованием-docker)
    - [Настройка и запуск](#настройка-и-запуск)
    - [Остановка контейнеров](#остановка-контейнеров)
- [Использование](#использование)
- [Обновление списка компаний](#обновление-списка-компаний)

## Описание
FinanceDataBot — это простой телеграм-бот, разработанный для отображения финансовых данных компаний в виде графиков. Бот интегрируется с Google Sheets и предоставляет пользователям актуальную информацию о доходах, расходах, прибыли и КПН компаний.

## Функциональные возможности
- **Подключение к базе данных**: Бот отображает финансовые данные из Google Sheets.
- **Меню выбора**: Пользователь может выбрать одну из компаний из списка и тип данных, который нужно отобразить.
- **Отображение данных**: По запросу бот генерирует и отправляет графики с актуальной информацией из таблицы.
- **Динамическое обновление**: Бот автоматически обновляет список компаний и данные с минимальной задержкой.

## Технические требования
- **Язык программирования**: TypeScript
- **Библиотека для телеграм-бота**: Telegraf
- **Интеграция с таблицей**: Использование Google Sheets API для получения данных.

## Установка и запуск

### Предварительные требования
- Node.js (версия 20.x и выше)
- Учетная запись Google для доступа к Google Sheets API
- Телеграм аккаунт для создания бота

### Настройка окружения (Стандартный запуск)
1. Клонируйте репозиторий:
    ```bash
    git clone https://github.com/MelsovEZ/FinanceDataBot.git
    ```
2. Перейдите в каталог проекта:
    ```bash
    cd FinanceDataBot
    ```
3. Установите зависимости:
    ```bash
    npm install
    ```
4. Создайте файл `.env` и заполните его:
    ```env
    BOT_ID=
    GOOGLE_CLIENT_EMAIL=
    GOOGLE_PRIVATE_KEY=
    SHEET_ID=
    ```

### Запуск бота (Стандартный запуск)
1. Запустите бота:
    ```bash
    npm run start
    ```

2. Откройте Telegram и найдите вашего бота по имени, чтобы начать работу.

### Запуск с использованием Docker

#### Предварительные требования
- Docker
- Docker Compose

#### Настройка и запуск
1. Клонируйте репозиторий:
    ```bash
    git clone https://github.com/MelsovEZ/FinanceDataBot.git
    ```
2. Перейдите в каталог проекта:
    ```bash
    cd FinanceDataBot
    ```
3. Создайте файл `.env` и заполните его:
    ```env
    BOT_ID=
    GOOGLE_CLIENT_EMAIL=
    GOOGLE_PRIVATE_KEY=
    SHEET_ID=
    ```
4. Запустите контейнеры:
    ```bash
    docker-compose up --build -d
    ```

5. Бот будет запущен и доступен в Telegram.

#### Остановка контейнеров
```bash
docker-compose down
```

## Использование
- **/start**: Запуск бота и приветственное сообщение.
- **Показать компании**: Выбор компании из списка доступных.
- **Выбор типа данных**: После выбора компании, бот предложит выбрать тип данных для отображения.

## Обновление списка компаний
Список компаний обновляется автоматически каждые 5 секунд, чтобы обеспечить актуальность данных. Для проверки этого достаточно сделать копию/создать еще одну страницу в таблице.
